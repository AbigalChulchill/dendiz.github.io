<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Deniz's personal pages</title>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1">
        <script src="/js/vendor/es5-shim.min.js"></script>
        <script src="/js/vendor/marked.min.js"></script>
        <!--script src="/js/vendor/purify.min.js"></script-->
        <script src="/js/vendor/ansi_up.min.js"></script>
        <script src="/js/vendor/prism.min.js"></script>
        <script src="/js/vendor/katex.min.js"></script>
        <script src="/js/vendor/katex-auto-render.min.js"></script>
	<script src="/js/vendor/notebook.js?_=2021-09-02 09:46:04"></script>
        <link rel="stylesheet" href="/css/vendor/katex.min.css" />
        <link rel="stylesheet" href="/css/vendor/prism.css" />
	<link rel="stylesheet" href="/css/notebook.css?2021-09-02 09:46:04" />
	<link rel="stylesheet" href="/css/nbpreview.css?2021-09-02 09:46:04" />
  <link href="https://fonts.googleapis.com/css?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900|Roboto+Mono:300,300i,400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet">
        <script type="application/text" id="source">
          {"cells": [{"cell_type": "markdown", "metadata": {}, "source": ["# techscan devlog 2018-05-30\n", "", "2018-05-30 [#techscan](/tag/techscan.html) [#fintech](/tag/fintech.html) [#devlog](/tag/devlog.html)\n"]}, {"cell_type": "markdown", "metadata": {"tags": ["techscan", "fintech", "devlog"]}, "source": ["\n", "## summary\n", "\n", "- UI design \n", "- technicals\n", "- performance\n", "\n", "now that the foundation for getting the data and caching properly was complete\n", "and I had a couple of scanners going I started on the technical indicator\n", "calculations. The first batch contains\n", "\n", "- price \n", "- price change percentage  \n", "- ATR  \n", "- ADX \n", "- DI +/-  \n", "- Long, medium and short term trends based on moving averages  \n", "- 52 week high and low  \n", "- average volume\n", "\n", "At first I thought I\u2019d only store 1 record per symbol containing the most\n", "up-to-date data on the instrument, but then I opted for storing the history of\n", "the technical data as well. I could be useful to browse them later.\n", "\n", "When running the technical calculations I noticed that the Redis cache\n", "retrieval code was still not fast enough. I also tweaked that code. Instead of\n", "making N parallel requests to Redis per stock symbol and parsing and storing\n", "them in the local cache, I do a single multi get to Redis, then parse the JSON\n", "data in parallel and store them into the cache. This is way faster (I didn\u2019t\n", "measure the exact amount). Even after this optimization it was still not fast\n", "enough. I can\u2019t wait more than 10 seconds for the cache warm-up. So I checked\n", "the next offender which is the JSON parsing. People on the net did benchmarks\n", "on the GSON library performance and it looked like it was one of the slowest\n", "libraries around. I thought that maybe using org.json could be better without\n", "using any reflection but that is the only library out there that\u2019s slower than\n", "GSON. Luckily the library that comes with spring (Jackson) is one of the\n", "fastest so I switched to using that and the results were amazing.\n", "\n", "GSON parser took 133 seconds to parse ~6.000 items, while Jackson took 1.7s to\n", "parse the same items. After this improvement I could run the technical data\n", "without wasting time on the application startup.\n", "\n", "Another matter that was annoying was the NaN values that TaLib4J returns. I\n", "didn\u2019t really expect to see a NaN value but some of the data from IEX for some\n", "stocks contains no opening/closing prices or the stock didn\u2019t trade at all some\n", "days so the prices are all the same. This led to NaN values in the library. I\n", "sorted these out.\n", "\n", "I also started on the stock data display page GUI design. Foundation CSS\n", "provides a nice framework for the layout etc so I\u2019m not using bootstrap.\n", "\n", "![](/img/stocktoot2-1.png)\n"]}], "metadata": {"celltoolbar": "Tags", "kernelspec": {"display_name": "Python 3", "language": "python", "name": "python3"}, "language_info": {"codemirror_mode": {"name": "ipython", "version": 3}, "file_extension": ".py", "mimetype": "text/x-python", "name": "python", "nbconvert_exporter": "python", "pygments_lexer": "ipython3", "version": "3.6.13"}}, "nbformat": 4, "nbformat_minor": 4}
        </script>
    </head>
    <body>
        <div id="main">
            <div class="header">
            <div style="position: absolute; left:10px; top:5px;">
              <a href="/blog/about.html">about</a>
              <a href="/micro/micro.html">micro</a>
              <a href="/blogindex.html">macro</a>
            </div>
            <h1>Deniz's Weblog</h1>
            <p style="font-family: monospace;">
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
            </p>
            </div>
            <div id="notebook-holder"></div>
            <hr/>
            <div>
              <em>Generated on 2021-09-02 09:46:04</em>
            </div>
            <p>
              Questions or comments? Please take the time to compose an email and send it to <a href="mailto:deniz.dizman@gmail.com?subject=Question/Comment">me</a>.
              I will update the relevant page with our correspondence.
            </p>
        </div>
        <script>
          var src = document.getElementById("source");
          var notebook = nb.parse(JSON.parse(src.innerText));
          var rendered = notebook.render();
          document.getElementById("notebook-holder").appendChild(rendered);
        </script>
    </body>
</html>
