<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Deniz's personal pages</title>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1">
        <script src="/js/vendor/es5-shim.min.js"></script>
        <script src="/js/vendor/marked.min.js"></script>
        <!--script src="/js/vendor/purify.min.js"></script-->
        <script src="/js/vendor/ansi_up.min.js"></script>
        <script src="/js/vendor/prism.min.js"></script>
        <script src="/js/vendor/katex.min.js"></script>
        <script src="/js/vendor/katex-auto-render.min.js"></script>
	<script src="/js/vendor/notebook.js?_=2021-09-03 23:03:01"></script>
        <link rel="stylesheet" href="/css/vendor/katex.min.css" />
        <link rel="stylesheet" href="/css/vendor/prism.css" />
	<link rel="stylesheet" href="/css/notebook.css?2021-09-03 23:03:01" />
	<link rel="stylesheet" href="/css/nbpreview.css?2021-09-03 23:03:01" />
  <link href="https://fonts.googleapis.com/css?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900|Roboto+Mono:300,300i,400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet">
        <script type="application/text" id="source">
          {"cells": [{"cell_type": "markdown", "metadata": {}, "source": ["# spring controller parameter injection\n", "", "2015-01-01 [#programming](/tag/programming.html)\n"]}, {"cell_type": "markdown", "metadata": {"tags": ["programming"]}, "source": ["\n", "For most applications that have some sort of login feature, you need the logged in user in your controllers or else where. If you are using an authorization/authentication framework they probably provide a nice way of doing this. If you are managing your sessions with spring there are probably different ways of doing this but for the sake of an example this is the scenario I'm going with. I want to pass the current user as a parameter to a controller method and have it populated with the current user by spring. This is done with a component that implement `HandlerMethodArgumentResolver`\n", "\n", "```\n", "@Component\n", "public class CurrentPlayerParameterResolver implements HandlerMethodArgumentResolver {\n", "    @Resource\n", "    PlayerSessionRepository playerSessionRepository;\n", "    @Override\n", "    public boolean supportsParameter(MethodParameter parameter) {\n", "        return parameter.getParameterType().equals(Player.class);\n", "    }\n", "\n", "    @Override\n", "    public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {\n", "        HttpServletRequest req = webRequest.getNativeRequest(HttpServletRequest.class);\n", "        Cookie[] cookies = req.getCookies();\n", "        if(cookies == null) return null;\n", "        for (Cookie cookie : cookies) {\n", "            if (cookie.getName().equals(Const.COOKIE_SID)) {\n", "                return playerSessionRepository.findBySessionId(cookie.getValue());\n", "            }\n", "        }\n", "        return null;\n", "    }\n", "}\n", "```\n", "\n", "install the resolver\n", "\n", "\n", "```\n", "@Configuration\n", "public class WebConfigurationAdapter extends WebMvcConfigurerAdapter {\n", "    @Resource\n", "    CurrentPlayerParameterResolver currentPlayerParameterResolver;\n", "\n", "    @Override\n", "    public void addArgumentResolvers(List<HandlerMethodArgumentResolver> argumentResolvers) {\n", "        argumentResolvers.add(currentPlayerParameterResolver);\n", "        super.addArgumentResolvers(argumentResolvers);\n", "    }\n", "\n", "}\n", "```\n", "\n", "and use it in your controllers\n", "\n", "\n", "```\n", "@GetMapping(value = \"/galaxies\")\n", "public String galaxy(Map<String,Object> model, Player currentPlayer) {\n", "//currentPlayer is populated\n", "...\n", "}\n", "```\n"]}], "metadata": {"celltoolbar": "Tags", "kernelspec": {"display_name": "Python 3", "language": "python", "name": "python3"}, "language_info": {"codemirror_mode": {"name": "ipython", "version": 3}, "file_extension": ".py", "mimetype": "text/x-python", "name": "python", "nbconvert_exporter": "python", "pygments_lexer": "ipython3", "version": "3.6.12"}}, "nbformat": 4, "nbformat_minor": 4}
        </script>
    </head>
    <body>
        <div id="main">
            <div class="header">
            <div style="position: absolute; left:10px; top:5px;">
              <a href="/blog/about.html?2021-09-03 23:03:01">about</a>
              <a href="/micro/micro.html?2021-09-03 23:03:01">micro</a>
              <a href="/blogindex.html?2021-09-03 23:03:01">macro</a>
            </div>
            <h1>Deniz's Weblog</h1>
            <p style="font-family: monospace;">
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
            </p>
            </div>
            <div id="notebook-holder"></div>
            <hr/>
            <div>
              <em>Generated on 2021-09-03 23:03:01</em>
            </div>
            <p>
              Questions or comments? Please take the time to compose an email and send it to <a href="mailto:deniz.dizman@gmail.com?subject=Question/Comment">me</a>.
              I will update the relevant page with our correspondence.
            </p>
        </div>
        <script>
          var src = document.getElementById("source");
          var notebook = nb.parse(JSON.parse(src.innerText));
          var rendered = notebook.render();
          document.getElementById("notebook-holder").appendChild(rendered);
        </script>
    </body>
</html>
