<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Deniz's personal pages</title>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1">
        <script src="/js/vendor/es5-shim.min.js"></script>
        <script src="/js/vendor/marked.min.js"></script>
        <!--script src="/js/vendor/purify.min.js"></script-->
        <script src="/js/vendor/ansi_up.min.js"></script>
        <script src="/js/vendor/prism.min.js"></script>
        <script src="/js/vendor/katex.min.js"></script>
        <script src="/js/vendor/katex-auto-render.min.js"></script>
	<script src="/js/vendor/notebook.js?_=2021-09-09 13:41:51"></script>
        <link rel="stylesheet" href="/css/vendor/katex.min.css" />
        <link rel="stylesheet" href="/css/vendor/prism.css" />
	<link rel="stylesheet" href="/css/notebook.css?2021-09-09 13:41:51" />
	<link rel="stylesheet" href="/css/nbpreview.css?2021-09-09 13:41:51" />
  <link href="https://fonts.googleapis.com/css?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900|Roboto+Mono:300,300i,400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet">
        <script type="application/text" id="source">
          {"cells": [{"cell_type": "markdown", "metadata": {}, "source": ["# kogmind devlog #4\n", "", "2020-06-15 [#gamedev](/tag/gamedev.html)\n"]}, {"cell_type": "markdown", "metadata": {"tags": ["gamedev"]}, "source": ["\n", "I was using a fixed seed during the development up until now for the RNG but I thought it would be a good time to start seeing how different seeds affect level generation and weapon rolls. So I started randomizing the seed for the RNG but I also log the selected seed in case I need to reproduce something.\n", "\n", "Yesterday I wrote about the ranged targeting line running through walls. It was replacing the wall tiles completely and looked a bit weird so I decided to use the overlay rendering layer to render the targeting line. I also changed the background to green with some transparency so that the wall tiles can be seen. This makes for a better visual.\n", "\n", "\n", "![](/img/km20200615.png)\n", "\n", "With the panning implementation the viewport updates needed to be changed and this has caused some new issues that I discovered today. When the player was alternating directions per turn (left, right, left, right,..) the viewport would update before the level rendered and produced a perception of sluggish rendering. I moved the viewport update to happen after the level rendered in the scheduler tick.\n", "\n", "![](/img/km7.gif)\n", "\n", "\n", "Another annoying bug I introduced by trying to be clever and not rendering cells that are not in FoW caused some quirks. Pay attention to the corridor on the middle left (the last one before the void). As the player moves down it looks like it\u2019s replicating itself to become a thick wall.\n", "\n", "```\n", " if skipFow {\n", "\n", "     target[y][x].illumination = illumination\n", "\n", " } else {\n", "\n", "     if game.level.fog[y + viewPort.y][x + viewPort.x]  {\n", "\n", "         target[y][x].illumination = illumination\n", "\n", "     } else {\n", "\n", "         //return //this is wrong and causes tiles to hang around\n", "\n", "         target[y][x].illumination = 0 //this is correct\n", "\n", "     }\n", "\n", " }\n", "```\n", "\n", "![](/img/km8.gif)\n", "\n", "It took quite a while until I understood what was causing the issue as I was thinking that some how a viewport update was getting out of sync with a render call.\n"]}], "metadata": {"celltoolbar": "Tags", "kernelspec": {"display_name": "Python 3", "language": "python", "name": "python3"}, "language_info": {"codemirror_mode": {"name": "ipython", "version": 3}, "file_extension": ".py", "mimetype": "text/x-python", "name": "python", "nbconvert_exporter": "python", "pygments_lexer": "ipython3", "version": "3.6.12"}}, "nbformat": 4, "nbformat_minor": 4}
        </script>
    </head>
    <body>
        <div id="main">
            <div class="header">
            <div style="position: absolute; left:10px; top:5px;">
              <a href="/blog/about.html">about</a>
              <a href="/micro/micro.html">micro</a>
              <a href="/blogindex.html">macro</a>
            </div>
            <h1>Deniz's Weblog</h1>
            <p style="font-family: monospace;">
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
                <!-- a class="inverted" href="/tag/.html">/</a-->
            </p>
            </div>
            <div id="notebook-holder"></div>
            <hr/>
            <div>
              <em>Generated on 2021-09-09 13:41:51</em>
            </div>
            <p>
              Questions or comments? Please take the time to compose an email and send it to <a href="mailto:deniz.dizman@gmail.com?subject=Question/Comment">me</a>.
              I will update the relevant page with our correspondence.
            </p>
        </div>
        <script>
          var src = document.getElementById("source");
          var notebook = nb.parse(JSON.parse(src.innerText));
          var rendered = notebook.render();
          document.getElementById("notebook-holder").appendChild(rendered);
        </script>
    </body>
</html>
