<!DOCTYPE html>
<html lang="en">
    <head>
      <title>Deniz's personal pages</title>
      <meta charset="utf-8">
      <meta name="viewport" content="initial-scale=1">
      <link rel="stylesheet" href="/css/style.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js" integrity="sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb" crossorigin="anonymous"></script>
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
           onload="renderMathInElement(document.body);"></script>
    </head>
    <body>
        <div>
        <strong>
        <a href="/micro/micro-index.html" onClick="this.href+='?rnd='+new Date().getTime()">Micro</a> &middot; 
        <a href="/post/index.html" onClick="this.href+='?rnd='+new Date().getTime()">Macro</a> &middot; 
        <a href="/post/about.html">About</a> &middot; 
        <a href="/post/now.html">Now</a> &middot; 
        <a href="/post/fn.html">fn</a>
        &middot;
        <a href="/twtxt.txt">twtxt</a>
        </strong>
        </div>
        <hr />
        <div id="main">
        <h1 id="title"> ITTB DevLog 2018-04-24</h1>
        <div id="date"><em> 2018-04-24</em></div>
        <div class="content">
        <h2>summary</h2>
<ul>
<li>firing arcs</li>
<li>support units</li>
<li>water expansion</li>
</ul>
<p>When displaying enemy firing arcs I didn’t want any water tiles to be
considered in range, as it made it look like water tiles were traversable,
which is false. So I just declared them as obstacles and excluded from the arc.
This lead to an undesired side effect of players not being able to shoot
enemies on the other side of the river. So I had to remedy the situation by
just not displaying the arc if the tile is a water tile.</p>
<p>Another thing that was bugging me was that the armor support units boost was
effecting the enemy units only after the first enemy moves were made. I changed
this by giving the boost in the <code>_ready</code> function call with gets called every
frame. I like to refrain from using this function as it consumes a lot of CPU
cycles. Another option would be to implement some kind of post enemy creation
hook that runs after all enemies are spawned and then distribute the boosts. I
would have to run this code again after each in-level spawn has happened which
I thought would be unnecessary complication in the code. One optimization I did
was instead of executing the call every frame I added a check to execute it one
every 0.5 seconds which is good enough for my purposes.</p>
<p>I was thinking about a type of enemy unit that would manipulate the terrain,
e.g expand the water tiles or make the volcano’s erupt and make lava flow
around the map having the same effect as water. When I set out to implement
this I realized that the backing array that I used when creating the map
initially was kind of limiting. If I wanted to add a new lava tile, I would
have to come up with a constant that represented that tile, and then add manage
path finding code, etc to account for this new tile type. Besides this I was
maintaining 2 data structures: the scene tree and matrix containing redundant
data. Since I can’t dump the scene tree, I had to dump the matrix. The first
iteration constructs a new matrix when needed from the scene tree on the fly,
the use of a 2D matrix makes path finding code a lot more simple. For the
second iteration of refactoring I’m thinking about getting rid of the constant
that I had been using to compare tile types, but I’m not sure this can be done.
I was thinking about comparing class types to get to tile types, but some tiles
share a class type, and GD script class type comparison isn’t that good. For
instance I could not find a way to compare a class to it self. Say I have a
function that returns all the enemy units on the map and in the support unit I
want to skip over the enemy types “support unit”. You can load the support unit
within itself, so you are kind of stuck with the constant comparisons.</p>

        </div>
        </div>
	<footer>
	<em>generated on 2021-09-30 23:11:36</em>
	</footer>
    </body>
</html>
