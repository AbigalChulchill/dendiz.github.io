<html lang="en">
    <head>
      <title>Deniz's personal pages</title>
      <meta charset="utf-8">
      <meta name="viewport" content="initial-scale=1">
      <link rel="stylesheet" href="/css/style.css" />
      <!--script src="/js/vendor/es5-shim.min.js"></script>
      <script src="/js/vendor/ansi_up.min.js"></script>
      <script src="/js/vendor/prism.min.js"></script>
      <script src="/js/vendor/katex.min.js"></script>
      <script src="/js/vendor/katex-auto-render.min.js"></script>
      <link rel="stylesheet" href="/css/vendor/katex.min.css" />
      <link href="https://fonts.googleapis.com/css?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900|Roboto+Mono:300,300i,400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet"-->
    </head>
    <body>
        <div>
        <strong>
        <a href="/micro/micro-index.html" onClick="this.href+='?rnd='+new Date().getTime()">Micro</a> | 
        <a href="/post/index.html" onClick="this.href+='?rnd='+new Date().getTime()">Macro</a> | 
        <a href="/post/about.html">About</a>
        </strong>
        </div>
        <hr />
        <div id="main">
        <h1 id="title"> Groovy templates variable passing</h1>
        <div id="date"><em> 2015-05-08</em></div>
        <div class="content">
        <p>Groovy Templates is one of the new cool kids on the block. It enables you to ditch the stinky old templates like FreeMarker or Velocity and use groovy to write your templates, which basically means no more eyes bleeding from angled brackets and HTML syntax. You can check it out here. One of the issues that I was facing with the templates was trying to pass a variable in the groovy context to an included template. Let me give an example to make it clear</p>
<pre><code>modelAndView.addObject(&quot;myvar&quot;, 5)
...


main.tpl:

div {
 include template 'included.tpl'
}


included.tpl:
 yield myvar

</code></pre>
<p>You add a variable to your model and have it rendered from the included template. The result is as expected this</p>
<pre><code>&lt;div&gt;myvar&lt;/div&gt;

</code></pre>
<p>But let’s say that myvar was a list of items that you wanted to iterate. Then the template code will be something like</p>
<pre><code>main.tpl:

div {
 myvars.each { myvar -&gt;
   include template 'included.tpl'
 }
}


included.tpl:
 yield myvar

</code></pre>
<p>Now you would expect it to render the contents of “myvar” in the included template but this will not happen. Instead you will get an error saying myvar is null. There is a kind of hack that I came up with to make this work and it’s to use the fragment directive. So the template becomes something like this</p>
<pre><code>div {
 myvars.each { myvar -&gt;
   fragment &quot;include template: 'included.tpl'&quot;, myvar:myvar
 }
}
</code></pre>
<p>this passes the variable to the included template model context.</p>

        </div>
        </div>
    </body>
</html>
