<html lang="en">
    <head>
      <title>Deniz's personal pages</title>
      <meta charset="utf-8">
      <meta name="viewport" content="initial-scale=1">
      <link rel="stylesheet" href="/css/style.css" />
      <!--script src="/js/vendor/es5-shim.min.js"></script>
      <script src="/js/vendor/ansi_up.min.js"></script>
      <script src="/js/vendor/prism.min.js"></script>
      <script src="/js/vendor/katex.min.js"></script>
      <script src="/js/vendor/katex-auto-render.min.js"></script>
      <link rel="stylesheet" href="/css/vendor/katex.min.css" />
      <link href="https://fonts.googleapis.com/css?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900|Roboto+Mono:300,300i,400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet"-->
    </head>
    <body>
        <div>
        <strong>
        <a href="/micro/micro-index.html" onClick="this.href+='?rnd='+new Date().getTime()">Micro</a> | 
        <a href="/post/index.html" onClick="this.href+='?rnd='+new Date().getTime()">Macro</a> | 
        <a href="/post/about.html">About</a>
        </strong>
        </div>
        <hr />
        <div id="main">
        <h1 id="title"> Ubuntu power saving on Asus Zenbook prime UX31A</h1>
        <div id="date"><em> 2014-10-17</em></div>
        <div class="content">
        <p>my primary laptop has been running a flavor of windows for the last couple of months and I was getting really good battery juice (upto 6 hours). I decided to install the lastest ubuntu gnome 14.04 to checkout what the gnome guys were doing mainly, and because I missed the native bash stuff. But to my surprise the battery / power saving out of the box is terrible. I got a measly 2.5~3 hours with the default settings. So to enable longer battery life you need to do these:</p>
<h3>enable ASPM during boot</h3>
<p>This will stop the machine from electrically communicting with the PCI-E slots and save some watts. You need to edit /etc/default/grub and replace the line with the following</p>
<pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash pcie_aspm=force drm.vblankoffdelay=1 i915.semaphores=1&quot;
</code></pre>
<h3>enable ALPM</h3>
<p>This mod enables the kernel AHCI controller to put the SATA link into a sleepy state when there is no communication. This will shave off a couple of watts from your power consumption as weel</p>
<pre><code>sudo apt-get install pm-utils
echo SATA_ALPM_ENABLE=true | sudo tee /etc/pm/config.d/sata_alpm
</code></pre>
<p>Here are some results for before and after these tweaks
Running for 300 seconds (30 samples at 10 second intervals).
ACPI battery power measurements will start in 180 seconds time</p>
<pre><code>  Time    User  Nice   Sys  Idle    IO  Run Ctxt/s  IRQ/s Fork Exec Exit  Watts
22:07:13   0.4   0.0   0.4  98.7   0.6    2    356    211    0    0    0  14.54
22:07:23   0.2   0.0   0.3  99.0   0.6    1    277    184    0    0    0  12.95
22:07:33   1.6   0.0   0.6  96.7   1.1    1    991    319    0    0    0  13.10
22:07:43   0.2   0.0   0.3  98.9   0.6    1    291    190    0    0    1  12.96
22:07:53   1.1   0.0   0.5  97.4   1.1    1    515    247    1    0    0  13.24
22:08:03   1.5   0.0   0.6  96.9   1.1    1    954    319    1    0    1  12.95
-------- ----- ----- ----- ----- ----- ---- ------ ------ ---- ---- ---- ------
 Average   0.8   0.0   0.4  98.0   0.8  1.2  564.1  244.9  0.3  0.0  0.3  13.29
  StdDev   0.6   0.0   0.1   1.0   0.3  0.4  299.1   56.2  0.5  0.0  0.5   0.57
-------- ----- ----- ----- ----- ----- ---- ------ ------ ---- ---- ---- ------
 Minimum   0.2   0.0   0.3  96.7   0.6  1.0  276.7  184.2  0.0  0.0  0.0  12.95
 Maximum   1.6   0.0   0.6  99.0   1.1  2.0  991.3  319.1  1.0  0.0  1.0  14.54
-------- ----- ----- ----- ----- ----- ---- ------ ------ ---- ---- ---- ------
Summary:
 13.29 Watts on Average with Standard Deviation 0.57  




Running for 300 seconds (30 samples at 10 second intervals).
ACPI battery power measurements will start in 180 seconds time

  Time    User  Nice   Sys  Idle    IO  Run Ctxt/s  IRQ/s Fork Exec Exit  Watts
22:13:03   0.7   0.0   0.5  98.2   0.6    1    526    236    2    0    1  10.65
22:13:13   0.5   0.0   0.3  98.5   0.6    1    336    202    1    0    0   9.31
22:13:23   1.7   0.0   0.6  96.7   1.1    2    976    321    1    0    0   9.36
22:13:33   0.6   0.0   0.4  98.3   0.7    1    604    249    0    0    2   8.99
22:13:43   2.1   0.0   0.7  95.9   1.3    1   1171    359    0    0    0   9.10
22:13:53   1.0   0.0   0.8  97.6   0.7    1    950    341    0    0    0   9.37
22:14:03   1.7   0.0   0.6  96.9   0.8    1    677    287    0    0    0  10.22
22:14:13   1.5   0.0   0.5  97.1   0.9    1    924    304    0    0    0   9.00
-------- ----- ----- ----- ----- ----- ---- ------ ------ ---- ---- ---- ------
 Average   1.2   0.0   0.5  97.4   0.8  1.1  770.5  287.3  0.5  0.0  0.4   9.50
  StdDev   0.6   0.0   0.1   0.9   0.2  0.3  260.6   50.9  0.7  0.0  0.7   0.57
-------- ----- ----- ----- ----- ----- ---- ------ ------ ---- ---- ---- ------
 Minimum   0.5   0.0   0.3  95.9   0.6  1.0  336.0  202.5  0.0  0.0  0.0   8.99
 Maximum   2.1   0.0   0.8  98.5   1.3  2.0 1171.2  358.7  2.0  0.0  2.0  10.65
-------- ----- ----- ----- ----- ----- ---- ------ ------ ---- ---- ---- ------
Summary:
  9.50 Watts on Average with Standard Deviation 0.57
</code></pre>
<pre><code>
</code></pre>

        </div>
        </div>
    </body>
</html>
