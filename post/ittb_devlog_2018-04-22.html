<html lang="en">
    <head>
      <title>Deniz's personal pages</title>
      <meta charset="utf-8">
      <meta name="viewport" content="initial-scale=1">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js" integrity="sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb" crossorigin="anonymous"></script>
      
      <link rel="stylesheet" href="/css/style.css" />
      <!--script src="/js/vendor/es5-shim.min.js"></script>
      <script src="/js/vendor/ansi_up.min.js"></script>
      <script src="/js/vendor/prism.min.js"></script>
      <script src="/js/vendor/katex.min.js"></script>
      <script src="/js/vendor/katex-auto-render.min.js"></script>
      <link rel="stylesheet" href="/css/vendor/katex.min.css" />
      <link href="https://fonts.googleapis.com/css?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900|Roboto+Mono:300,300i,400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet"-->
    </head>
    <body>
        <div>
        <strong>
        <a href="/micro/micro-index.html" onClick="this.href+='?rnd='+new Date().getTime()">Micro</a> | 
        <a href="/post/index.html" onClick="this.href+='?rnd='+new Date().getTime()">Macro</a> | 
        <a href="/post/about.html">About</a> |
        <a href="/post/now.html">Now</a> |
        <a href="/twtxt.txt">twtxt</a>
        </strong>
        </div>
        <hr />
        <div id="main">
        <h1 id="title"> ITTB DevLog 2018-04-22</h1>
        <div id="date"><em> 2018-04-22</em></div>
        <div class="content">
        <h2>summary</h2>
<ul>
<li>AI,</li>
<li>support units</li>
<li>weapons</li>
<li>targeting arcs</li>
</ul>
<p>I thought about different AI enemy types today. Currently the damage, and the
health/armor for the AI was being set within an interval appropriate with the
current level, but this doesn’t really give the sense that you are fighting
against different enemies. The AI also tries to compensate for the static
nature by introducing some non-determinism into target selection but still not
enough. What I need is to have different types of units. E.g a unit that stuns
the enemy, like the half snake monsters from XCOM2. Or support units that boost
the health of the all the enemies in the level unless it’s destroyed. These
types of units will need their own AI implementations. E.g a support unit won’t
go around chasing enemies, it will try to stay as far away from the player as
it can and evade the player. So to facilitate this, I moved the AI into the
enemy base class and a portion of it (target selection/movement) to the current
type of enemy. (called type A, because I haven’t yet thought about names or a
story line etc.). This turned to be a bit tedious with subtle variable
shadowing bugs creeping in an took a good portion of my day.</p>
<p>This also lead the way for letting the enemies use the same types of weapons
the player was using, for the time being which means that the enemies will soon
get ranged weapons. This actually has an implication on the user interface, the
player should be able to see which enemy has a ranged weapon and the area that
it covers. Maybe if this were a PC game a mouse-over the enemy would reveal
it’s range and coverage but this doesn’t work when you are targeting handheld
devices.  I also don’t want to complicate the selection states further by
revealing this information when a player is not selected and an enemy is
selected etc. So the idea I came up with is to display the ranged attack arc of
the enemy when the player selects his own unit and that unit can actually move,
as it only matters when moving. This refactoring lead me to the decision to
also move the targeting code from the player and enemy classes into the weapon
classes themselves, using the wielder information for target selection (you
don’t want to shoot at friendlies). Coming from a server-side programming
background I am used to using lists, arrays etc to use composition in objects,
but with the scene tree there, it actually makes more sense to use a node in
the scene tree to hold stuff like weapons, as you get the holder of that item
from the scene tree way more easier.  Otherwise you have to pass around the
reference of the parent etc. This model of programming should also find it’s
way into other domains. You should be able to freely traverse the object graph.</p>
<p>I was also thinking that all player units would carry a ranged weapon but this
doesn’t seem optimal to me now. Some units should only have a melee attack, and
loot a ranged weapon after progressing in the game? One thing is for sure
though you can’t have 2 ranged weapons, as that would require the player to
select which one to fire. I want to take a convention over configuration type
of approach for a mobile game. The convention here being that if you are in
melee range you can only do a melee attack. This is also kind of more
realistic. If you were in a close brawl with someone would you leave that and
try to shoot at something far away?</p>
<p>I was able to squeeze a couple of hours more out of the day (mostly because my
SO is away on an MBA class reunion in Nashville) to implement the range arc
display for enemies that are equipped with a ranged weapon. I also changed the
sprite they use for a visual distinction between the current 2 types of
enemies.</p>
<p><img src="/img/ittb3.png" alt="" /></p>

        </div>
        </div>
    </body>
</html>
